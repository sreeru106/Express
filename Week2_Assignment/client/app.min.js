var mainApp=angular.module("mainApp",["ngRoute"]);mainApp.config(["$routeProvider",function(a){a.when("/addStudent",{templateUrl:"app/add/addStudent.jsp",controller:"AddStudentController",controllerAs:"ctrl"}).when("/viewStudent",{templateUrl:"app/view/viewStudent.jsp",controller:"ViewStudentController",controllerAs:"view"}).when("/modifyStudent",{templateUrl:"app/modify/modifyStudent.jsp",controller:"ModifyStudentController",controllerAs:"modify"}).when("/slider",{templateUrl:"app/slider/slider.jsp",controller:"SliderController"})}]),mainApp.directive("jqSlider",[function(){return{restrict:"A",scope:{model:"="},link:function(a,b,c){$(b).slider({value:+a.model,min:+c.min,max:+c.max,step:+c.step,slide:function(b,c){a.$apply(function(){a.model=c.value})}})}}}]),mainApp.controller("AddStudentController",["$scope","AddStudentService",function(a,b){var c=this;c.student={name:"",age:null,id:null},c.submitDetails=function(){b.createStudent(c.student).then(function(a){console.log("creating Student successfully")},function(a){console.error("Error while creating Student")}),c.resetDetails()},c.resetDetails=function(){c.student={name:"",age:null,id:null},a.studentForm.$setPristine(),a.studentForm.$setUntouched()}}]),mainApp.service("AddStudentService",["$http","$q",function(a,b){this.createStudent=function(c){var d=b.defer();return a.post("admin/addStudent",c).then(function(a){d.resolve(a.data)},function(a){console.error("Error while creating Student"),d.reject(a)}),d.promise}}]),mainApp.controller("ModifyStudentController",["$scope","$location","ModifyStudentService","ViewStudentService",function(a,b,c,d){function e(){var a=d.getData();f.student.name=a.name,f.student.age=a.age,f.student.id=a.id}var f=this;f.student={name:"",age:null,id:null},e(),f.updateDetails=function(){c.updateStudent(f.student,f.student.id).then(function(a){console.log("updating Student successfully")},function(a){console.error("Error while updating Student")}),f.student={name:"",age:null,id:null},a.studentForm.$setPristine(),b.path("viewStudent")}}]),mainApp.service("ModifyStudentService",["$http","$q",function(a,b){var c=[];this.setData=function(a){c=a},this.getData=function(){return c},this.updateStudent=function(c,d){var e=b.defer();return a.put("admin/modifyStudent/"+d,c).then(function(a){e.resolve(a.data)},function(a){console.error("Error while editing Student"),e.reject(a)}),e.promise}}]),mainApp.controller("SliderController",["$scope",function(a){a.sliderValue=50}]),mainApp.controller("ViewStudentController",["$scope","ViewStudentService",function(a,b){function c(){b.fetchAllStudents().then(function(a){d.students=a},function(a){console.error("Error while fetching Students")})}var d=this;d.students=[],c(),d.edit=function(a,c){b.setData(c)},d.removeDetails=function(a){b.deleteStudent(a).then(function(a){d.students=a,console.log("delete Student successfully")},function(a){console.error("Error while deleting Student")})}}]),mainApp.service("ViewStudentService",["$http","$q",function(a,b){var c=[];this.setData=function(a){c=a},this.getData=function(){return c},this.fetchAllStudents=function(){var c=b.defer();return a.get("admin/allStudent").then(function(a){c.resolve(a.data)},function(a){console.error("Error while fetching Students"),c.reject(a)}),c.promise},this.deleteStudent=function(c){var d=b.defer();return a.delete("admin/deleteStudent/"+c.id).then(function(a){d.resolve(a.data)},function(a){console.error("Error while deleting Student"),d.reject(a)}),d.promise}}]);
